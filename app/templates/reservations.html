<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Réservations - Agence de Voyage</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h1>Gestion des Réservations</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('index') }}">Accueil</a></li>
                <li><a href="{{ url_for('clients') }}">Clients</a></li>
                <li><a href="{{ url_for('destinations') }}">Destinations</a></li>
                <li><a href="{{ url_for('flights') }}">Vols</a></li>
                <li><a href="{{ url_for('payments') }}">Paiements</a></li>
                <li><a href="{{ url_for('agents') }}">Espace Agent</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h2>Liste des Réservations</h2>
        <!-- Filters for reservation history -->
        <div class="filters mb-3">
            <form action="#" method="GET">
                <label for="filter_client" style="margin-right: 10px;">Filtrer par Client ID:</label>
                <input type="text" id="filter_client" name="filter_client" placeholder="ID Client" style="width: 150px; margin-right: 20px;">

                <label for="filter_status" style="margin-right: 10px;">Statut:</label>
                <select id="filter_status" name="filter_status" style="width: 150px; margin-right: 20px;">
                    <option value="">Tous</option>
                    <option value="en cours">En cours</option>
                    <option value="en attente">En attente</option>
                    <option value="confirmé">Confirmé</option>
                    <option value="annulé">Annulé</option>
                </select>
                <button type="submit" class="btn">Filtrer</button>
            </form>
        </div>

        <table class="mb-3">
            <thead>
                <tr>
                    <th>ID Rés.</th>
                    <th>Client (ID/Nom)</th>
                    <th>Vol (Numéro)</th>
                    <th>Destination</th>
                    <th>Date Réservation</th>
                    <th>Nombre de Places</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Sample Reservation Row 1 -->
                <tr>
                    <td>R001</td>
                    <td>C001 (Jean Dupont)</td>
                    <td>V789</td>
                    <td>Paris</td>
                    <td>2023-10-15</td>
                    <td>2</td>
                    <td>Confirmé</td>
                    <td>
                        <a href="#" class="btn" style="background-color: #ffc107; color: #333;">Modifier</a>
                        <a href="#" class="btn" style="background-color: #dc3545;">Annuler</a>
                    </td>
                </tr>
                <!-- Sample Reservation Row 2 -->
                <tr>
                    <td>R002</td>
                    <td>C002 (Alice Martin)</td>
                    <td>V790</td>
                    <td>New York</td>
                    <td>2023-11-01</td>
                    <td>1</td>
                    <td>En attente</td>
                    <td>
                        <a href="#" class="btn" style="background-color: #ffc107; color: #333;">Modifier</a>
                        <a href="#" class="btn" style="background-color: #dc3545;">Annuler</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <h2>Créer une Nouvelle Réservation</h2>
        <form action="#" method="POST"> <!-- Action will be handled by backend later -->
            <div>
                <label for="client_id">Client (ID ou Nom):</label>
                <!-- In a real app, this might be a searchable dropdown or an ID input -->
                <input type="text" id="client_id" name="client_id" placeholder="ID ou nom du client" required>
            </div>
            <div>
                <label for="vol_id">Vol (Numéro de vol):</label>
                <!-- This could be a dropdown populated from available flights -->
                <input type="text" id="vol_id" name="vol_id" placeholder="Numéro de vol" required>
            </div>
            <div>
                <label for="destination_id">Destination:</label>
                <!-- This could be a dropdown populated from available destinations, possibly linked to Vol selection -->
                <input type="text" id="destination_name" name="destination_name" placeholder="Nom de la destination" required>
            </div>
            <div>
                <label for="date_reservation">Date de Réservation:</label>
                <input type="date" id="date_reservation" name="date_reservation" required>
            </div>
            <div>
                <label for="nombre_places">Nombre de Places:</label>
                <input type="number" id="nombre_places" name="nombre_places" min="1" value="1" required>
            </div>
            <div>
                <label for="statut_reservation">Statut de la Réservation:</label>
                <select id="statut_reservation" name="statut_reservation">
                    <option value="en cours">En cours</option>
                    <option value="en attente">En attente</option>
                    <option value="confirmé">Confirmé</option>
                    <option value="annulé">Annulé</option>
                </select>
            </div>
            <button type="submit" class="btn">Créer Réservation</button>
        </form>
    </main>
    <footer>
        <p>&copy; 2023 Agence de Voyage</p>
    </footer>

    <script>
        // Add active class to current page link in nav
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('header nav ul li a');
            let currentPath = window.location.pathname;
            if (currentPath.endsWith('/')) {
                currentPath = currentPath.slice(0, -1);
            }
            const currentPageName = currentPath.split('/').pop().replace('.html', '');

            navLinks.forEach(link => {
                const linkPath = link.getAttribute('href');
                if ( (currentPageName === 'index' || currentPageName === '') && (linkPath.endsWith('/index') || linkPath === '/' || linkPath.endsWith('/index.html')) ){
                    link.classList.add('active');
                } else if (linkPath.includes(currentPageName) && currentPageName !== 'index' && currentPageName !== '') {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
